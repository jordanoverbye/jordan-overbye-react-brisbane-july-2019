export { themes } from './themes'
import { Light } from './layout'
import { Appear, Image } from '@mdx-deck/components'
import { Invert } from 'mdx-deck/layouts'


# Customising your JSX pragma for utility CSS-in-JS

Jordan Overbye / @jordanoverbye

---

<Light>
  <img style={{ maxWidth: '70vw' }} src="/assets/thinkmill.jpg" />
</Light>

---

# Design systems
# Platforms & Products
# Design & UX 
# Training

---

# Node / React / GraphQL / Design

----

# ‚ù§Ô∏è Open Source ‚ù§Ô∏è 

---

# Keystone
# React Select
# Emotion

... many more

---

# Over 3,000,000 monthly downloads 

### IBM Watson, Atlassian, Shopify, US Gov Design System, Wix, Cisco Spark, Wordpress, and many others

---

<Light>
  <img style={{ maxWidth: '50vw' }} src="/assets/reactconf-au.jpg" />
</Light>

---

# reactconf.com.au

---

<Invert>

# What is "utility-first CSS-in-JS"?

</Invert>

---

# CSS-in-JS syntax but with "utilities"

---

<ul>
  <li>Theme-based contrains</li>
  <Appear>
    <li>Shorthands</li>
    <li>Fast</li>
    <li>Style default elements (sometimes)</li>
  </Appear>
</ul>

---

# How does JSX work üòï

---

```
<div className="my-class">Hello World</div>
```

&darr;

```
React.createElement(
  "div", 
  { className: "my-class" }, 
  "Hello World!
);
```

---

```
React.createElement(
  type,
  props,
  children,
);
```

---

```jsx
import React from 'react'

function HelloWorld() {
  return (
    <div className="my-class">
      Hello World
    </div>
  )
}
```

---
```
var React = require("react")

function HelloWorld() {
  return React.createElement("div", 
    { className: "my-class" }, 
    "Hello World!
  );
}
```
---

```
// import React from 'react'

function HelloWorld() {
  return (
    <div className="my-class">
      Hello World
    </div>
  )
}
```
---

```
Uncaught ReferenceError: React is not defined
```

---

# How do we customise this?

---

## Babel

```
{
  "plugins": [
    ["@babel/plugin-transform-react-jsx", {
      "pragma": "", // default is React.createElement
      "pragmaFrag": "" // default is React.Fragment
    }]
  ]
}
```
---

## Top of file

```
/** @jsx jsx **/
import { jsx } from './custom-jsx'

function HelloWorld() {
  return (
    <div className="my-class">
      Hello World
    </div>
  )
}
```

---

```
import React from 'react'

export function jsx(type, props. children) {
  return React.createElement(type, props, children)
}
```

---

```
import React from 'react'

export function jsx(type, props. children) {
  return React.createElement(type, 
    { className: 'react-brisbane' }, 
    children
  )
}
```

---

```
<h1 className="my-class">Hello World</h1>
```

&darr;

```
React.createElement(
  "h1", 
  { className: "react-brisbane" }, 
  Hello World
);
```

---

# Cool, but why?

---

# What's wrong with "traditional" CSS? üò±

---

<Light>
  <img src="/assets/css-technologies.png" />
</Light>

---

# [Demo time üê∂](localhost:3000/demo-1)

---

<Invert>

# What is Emotion üë©‚Äçüé§

</Invert>


---

## Performant and flexible CSS-in-JS library

---


<Light>
  <img src="/assets/emotion-usage.png" />
</Light>

---

```
/** @jsx jsx **/
import { jsx } from '@emotion/core'

function MyComponent() {
  return (
    <div css={{ backgroundColor: 'pink', color: 'blue' }}>
      Hello
    </div>
  )
}
```

&darr;

```
<div className="css-scexrf-MyComponent>
  Hello
</div>
```

---

# What's going on here?

---

<ul>
  <li>1. Provide styles (css prop)</li>
  <Appear>
    <li>2. Hash the styles</li>
    <li>3. Create CSS rule(s) using the hash as the className</li>
    <li>4. Insert rule(s) into a stylesheet</li>
  </Appear>
</ul>

---

# `CSSStyleSheet`

---

```
const styleEl = document.createElement("style");
document.head.appendChild(styleEl);

const sheet = styleEl.sheet;
sheet.insertRule('.my-class { color: blue }', 0);
```

--- 

# Why not Styled Component?

---

```
import React from 'react';
import styled from 'styled-components';

const FancyComponent = styled('span')({
  color: 'red',
  fontWeight: 'bold',
})

function MyComponent() {
  return (
    <h1>
      Hello World!
      My name is <FancyComponent>Jordan</FancyComponent>
    </h1>
  )
}
```
--- 

```
/** @jsx jsx **/
import { jsx } from '@emotion/core';

function MyComponent() {
  return (
    <h1>
      Hello World! My name is 
      <span css={{ color: 'red', fontWeight: 'bold' }}>
        Jordan
      </span>
    </h1>
  )
}
```

---

<Invert>

# Experiments 

</Invert>

---

# [Using a CSS-in-JS syntax to output tailwind classes](/)

---

# [Theme constraints](/)

---

# Styled System

---

# Style props for rapid UI development inspired by constraint-based design system principles 

---

```jx
import styled from '@emotion/styled'
import { space, layout, typography, color } from 'styled-system'

// Add styled-system functions to your component
const Box = styled.div`
  ${space}
  ${layout}
  ${typography}
  ${color}
`
```

---

```
<Box
  fontSize={4}
  fontWeight='bold'
  p={3}
  mb={[ 4, 5 ]}
  color='white'
  bg='primary'>
  Hello
</Box>
```

---

```
import { color, space } from 'styled-system'

const theme = {
  colors: {
    primary: 'hotpink'
  }
}

color({ theme, color: 'primary' })
=> { color: 'hotpink' }

space({ mt: 0, mb: 1, ml: 2, mr: 3 })
=> { 
    marginTop: 0, 
    marginBottom: 4, 
    marginLeft: 8, 
    marginRight: 16 
  }
```

---

```
const theme = {
  colors: {
    navy: '#004175'
  }
}

console.log()

// => { color: '#004175' }
```

---

<Invert>

# Theme UI

</Invert>

---

# Thank you üëã